<!--
%\VignetteEngine{knitr::knitr}
%\VignetteIndexEntry{Variable Order}
-->

[Previous: array variables](array-variables.html)

```{r, results='hide', echo=FALSE, message=FALSE, eval=FALSE}
library(crunch)
load("variable-order.RData")
```

# Variable Order and Organization

In the web application, variables in a dataset are displayed in a list on the left side of the screen.

<!-- screenshot -->

Typically, when you import a dataset, the variable list is flat, but it can be organized into an accordion-like hierarchy. The variable organizer in the GUI allows you to perform this organization visually, but you can also manage this metadata from `crunch`.

## Viewing the order

Picking up with the dataset we used in the [array variables vignette](array-variables.html), we can fetch the `ordering` property of the dataset to view the current organization:

```{r, eval=FALSE}
ordering(ds)
```
```{r, echo=FALSE}
step0
```

It's flat. If you're importing data from a `data.frame` or a file, like an SPSS file, this is where you'll begin.

## Creating groups
Since I know how this dataset is organized, I'm going quickly toss the variables into one of a small number of groups, instantiated with `VariableGroup`, and collect them in a container object called `VariableOrder`.

```{r, eval=FALSE}
ordering(ds) <- VariableOrder(
        VariableGroup("Demos", ds[c(1:3, 93:118)]),
        VariableGroup("Tracking questions", ds[c(4,5,52:92)]),
        VariableGroup("This week", ds[6:51])
    )
```

Now, our variable tree has some structure:

```{r, eval=FALSE}
ordering(ds)
```
```{r, echo=FALSE}
step1
```

## Group names
We can use the `names` method to access and modify these group names:

```{r, eval=FALSE}
names(ordering(ds))
```
```{r, echo=FALSE}
names(step1)
```

Let's rename the first group. No need to abbreviate "Demographics".

```{r, eval=FALSE}
names(ordering(ds))[1] <- "Demographics"
names(ordering(ds))
```
```{r, echo=FALSE}
names(step2)
```

## Reordering groups and entities

`VariableOrder` and `VariableGroup` support standard R forms of indexing for extracting and reordering. 

Let's move "Demographics" to the end:

```{r, eval=FALSE}
ordering(ds) <- ordering(ds)[c(2, 3, 1)]
names(ordering(ds))
```
```{r, echo=FALSE}
names(step3)
```

## Nested groups

[Next: transforming and deriving](derive.html)