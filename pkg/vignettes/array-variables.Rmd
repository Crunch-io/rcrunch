<!--
%\VignetteEngine{knitr::knitr}
%\VignetteIndexEntry{Array Variables}
-->

# Array Variables

Sometimes variables' source datasets don't contain all of the metadata needed to create the more complex representations available in Crunch datasets. Plain-text .csv files, for example, can't express that some columns are actually indicator matrices of multiple selections (Multiple Response Variables). Most SPSS .sav files do not indicate Categorical Arrays (otherwise known as "grids") as being part of a group--they are simply several categorical variables. The same is true for an R `data.frame`.

You can use rcrunch to "bind" categorical variables into Multiple Response and Categorical Array variables.

One of the reasons to use R with Crunch is to leverage the power of scripting for tasks that would be repetitive in a GUI. Many rcrunch functions operating on Crunch datasets have an optional `pattern` argument that lets you use regular expressions for these "bulk" operations. Having hidden the constant `spend_Batt`, we can now group the other `spend_` variables into a Categorical Array.

```{r bind, eval=FALSE}
spending <- makeArray(pattern="^spend_", dataset=ds, name="Federal Spending")
```

In the Crunch web application, the Federal Spending array has gone from seven separate categorical variable cards to just one, where the subvariables are shown as rows, and the common categories across all of them are shown as columns:

![Categorical Array variable card](array-card.png)

![Array table in analysis view](array-table.png)
